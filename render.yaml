services:
  - type: web
    name: n8n
    env: node
    region: frankfurt # change si tu veux (frankfurt, oregon, singapore, etc.)
    plan: free
    buildCommand: npm install && npm run build
    startCommand: n8n start
    envVars:
      - key: N8N_BASIC_AUTH_ACTIVE
        value: "true"
      - key: N8N_BASIC_AUTH_USER
        value: "admin"
      - key: N8N_BASIC_AUTH_PASSWORD
        value: "motdepassefort"   # üîí change-moi !
      - key: WEBHOOK_URL
        value: "https://n8n-onrender.onrender.com/" # üîÅ √† mettre √† jour apr√®s le d√©ploiement
      - key: N8N_ENCRYPTION_KEY
        value: "1234567890abcdef1234567890abcdef"   # g√©n√®re une cl√© al√©atoire de 32 caract√®res
      - key: DB_TYPE
        value: "postgresdb"
      - key: DB_POSTGRESDB_HOST
        value: "db.xxxxxx.supabase.co"  # üëâ ton host Supabase
      - key: DB_POSTGRESDB_PORT
        value: "5432"
      - key: DB_POSTGRESDB_DATABASE
        value: "postgres"
      - key: DB_POSTGRESDB_USER
        value: "postgres"
      - key: DB_POSTGRESDB_PASSWORD
        value: "ton_mot_de_passe_supabase"
      - key: DB_POSTGRESDB_SSL_CA
        value: "/etc/ssl/certs/ca-certificates.crt"
      - key: GENERIC_TIMEZONE
        value: "Europe/Paris"
      - key: EXECUTIONS_PROCESS
        value: "main"
    healthCheckPath: /
    autoDeploy: true
